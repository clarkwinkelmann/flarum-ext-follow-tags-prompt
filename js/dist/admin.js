(()=>{var t={n:a=>{var n=a&&a.__esModule?()=>a.default:()=>a;return t.d(n,{a:n}),n},d:(a,n)=>{for(var o in n)t.o(n,o)&&!t.o(a,o)&&Object.defineProperty(a,o,{enumerable:!0,get:n[o]})},o:(t,a)=>Object.prototype.hasOwnProperty.call(t,a),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},a={};(()=>{"use strict";t.r(a);const n=flarum.core.compat["admin/app"];var o=t.n(n);const r=flarum.core.compat["common/extend"],e=flarum.core.compat["admin/components/BasicsPage"];var l=t.n(e);function s(t,a){return s=Object.setPrototypeOf||function(t,a){return t.__proto__=a,t},s(t,a)}const i=flarum.core.compat["admin/components/ExtensionPage"];var g=t.n(i);const c=flarum.core.compat["common/components/Select"];var p=t.n(c);const u=flarum.core.compat["common/components/Switch"];var d=t.n(u);const f=flarum.core.compat["tags/utils/sortTags"];var y=t.n(f);const h=flarum.core.compat["common/components/LoadingIndicator"];var v=t.n(h),b="clarkwinkelmann-follow-tags-prompt.",w="clarkwinkelmann-follow-tags-prompt.admin.settings.",S=function(t){var a,n;function r(){for(var a,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=t.call.apply(t,[this].concat(o))||this).allTagsLoaded=!1,a.loadingAllTags=!1,a}n=t,(a=r).prototype=Object.create(n.prototype),a.prototype.constructor=a,s(a,n);var e=r.prototype;return e.oninit=function(a){t.prototype.oninit.call(this,a),"list"===this.setting(b+"availableTagStrategy")()&&this.loadAllTags()},e.loadAllTags=function(){var t=this;this.loadingAllTags=!0,o().store.find("tags",{include:"parent,lastPostedDiscussion"}).then((function(){t.loadingAllTags=!1,t.allTagsLoaded=!0,m.redraw()}))},e.content=function(){var t=this;return m(".ExtensionPage-settings",m(".container",[m(".Form-group",[m("label",d().component({state:"1"===this.setting(b+"buttonOnFollowingPage","1")(),onchange:function(a){t.setting(b+"buttonOnFollowingPage")(a?"1":"0")}},o().translator.trans(w+"buttonOnFollowingPage")))]),m(".Form-group",[m("label",d().component({state:"1"===this.setting(b+"allDiscussionsOnFollowingPageForGuests")(),onchange:function(a){t.setting(b+"allDiscussionsOnFollowingPageForGuests")(a?"1":"0")}},o().translator.trans(w+"allDiscussionsOnFollowingPageForGuests")))]),m(".Form-group",[m("label",o().translator.trans(w+"availableTagStrategy")),p().component({options:{primary:o().translator.trans(w+"tagStrategy.primary"),primaryAndChildren:o().translator.trans(w+"tagStrategy.primaryAndChildren"),primaryAndSecondary:o().translator.trans(w+"tagStrategy.primaryAndSecondary"),secondary:o().translator.trans(w+"tagStrategy.secondary"),all:o().translator.trans(w+"tagStrategy.all"),list:o().translator.trans(w+"tagStrategy.list")},value:this.setting(b+"availableTagStrategy")()||"primary",onchange:function(a){"list"!==a||t.allTagsLoaded||t.loadingAllTags||t.loadAllTags(),t.setting(b+"availableTagStrategy")(a)}})]),this.tagList(),m(".Form-group",this.submitButton())]))},e.tagList=function(){var t=this;if("list"!==this.setting(b+"availableTagStrategy")())return null;if(this.loadingAllTags)return v().component();var a=[];try{a=JSON.parse(this.setting(b+"availableTagIds")()||"[]")}catch(t){console.warn("Could not parse existing value for "+b+"availableTagIds",t)}return Array.isArray(a)||(a=[]),y()(o().store.all("tags")).map((function(n){var o=-1!==a.indexOf(n.id());return m(".Form-group",[m("label",d().component({state:o,onchange:function(o){t.setting(b+"availableTagIds")(JSON.stringify(o?[].concat(a,[n.id()]):a.filter((function(t){return t!==n.id()}))))}},n.name()))])}))},r}(g());o().initializers.add("clarkwinkelmann/follow-tags-prompt",(function(){o().extensionData.for("clarkwinkelmann-follow-tags-prompt").registerPage(S),(0,r.extend)(l().prototype,"homePageItems",(function(t){t.add("clarkwinkelmann-following-tags-prompt",{path:"/following",label:o().translator.trans("clarkwinkelmann-follow-tags-prompt.admin.homepage.following")})}))}))})(),module.exports=a})();
//# sourceMappingURL=admin.js.map